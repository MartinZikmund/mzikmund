<?xml version="1.0" encoding="utf-8" ?>
<local:VideosViewBase
	x:Class="MZikmund.Views.VideosView"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:local="using:MZikmund.Views"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:models="using:MZikmund.DataContracts.Videos"
	Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
	mc:Ignorable="d">

	<Grid Padding="16">
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto" />
			<RowDefinition Height="*" />
		</Grid.RowDefinitions>

		<Button
			Grid.Row="0"
			Margin="0,0,0,16"
			HorizontalAlignment="Right"
			Command="{x:Bind ViewModel.RefreshCommand, Mode=OneWay}"
			Content="Refresh" />

		<ScrollViewer
			x:Name="Scroller"
			Grid.Row="1">
			<ItemsRepeater ItemsSource="{x:Bind ViewModel.Videos, Mode=OneWay}">
				<ItemsRepeater.Layout>
					<UniformGridLayout
						ItemsStretch="Fill"
						MinColumnSpacing="16"
						MinItemHeight="300"
						MinItemWidth="250"
						MinRowSpacing="16" />
				</ItemsRepeater.Layout>
				<ItemsRepeater.ItemTemplate>
					<DataTemplate x:DataType="models:VideoDto">
						<Grid
							Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
							BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
							BorderThickness="1"
							CornerRadius="{ThemeResource ControlCornerRadius}">
							<Grid.RowDefinitions>
								<RowDefinition Height="150" />
								<RowDefinition Height="*" />
							</Grid.RowDefinitions>

							<!--  Thumbnail  -->
							<Grid Grid.Row="0" Background="{ThemeResource SystemControlBackgroundBaseLowBrush}">
								<Image Stretch="UniformToFill">
									<Image.Source>
										<BitmapImage UriSource="{x:Bind ThumbnailUrl}" />
									</Image.Source>
								</Image>
								<!--  Play Icon Overlay  -->
								<FontIcon
									HorizontalAlignment="Center"
									VerticalAlignment="Center"
									FontSize="48"
									Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"
									Glyph="&#xE768;" />
							</Grid>

							<!--  Content  -->
							<StackPanel
								Grid.Row="1"
								Padding="12"
								Spacing="8">
								<TextBlock
									Foreground="{ThemeResource SystemControlForegroundBaseMediumBrush}"
									Style="{ThemeResource CaptionTextBlockStyle}"
									Text="{x:Bind PublishedDate, Mode=OneWay}" />
								<TextBlock
									MaxLines="2"
									Style="{ThemeResource BodyStrongTextBlockStyle}"
									Text="{x:Bind Title, Mode=OneWay}"
									TextTrimming="CharacterEllipsis"
									TextWrapping="Wrap" />
								<TextBlock
									Foreground="{ThemeResource SystemControlForegroundBaseMediumBrush}"
									MaxLines="2"
									Style="{ThemeResource CaptionTextBlockStyle}"
									Text="{x:Bind Description, Mode=OneWay}"
									TextTrimming="CharacterEllipsis"
									TextWrapping="Wrap" />
								<HyperlinkButton
									Margin="0,4,0,0"
									Padding="0"
									Content="Watch on YouTube"
									NavigateUri="{x:Bind YouTubeUrl, Mode=OneWay}" />
							</StackPanel>
						</Grid>
					</DataTemplate>
				</ItemsRepeater.ItemTemplate>
			</ItemsRepeater>
		</ScrollViewer>

		<ProgressRing
			Grid.RowSpan="2"
			HorizontalAlignment="Center"
			VerticalAlignment="Center"
			IsActive="{x:Bind ViewModel.IsLoading, Mode=OneWay}"
			Visibility="{x:Bind ViewModel.IsLoading, Converter={StaticResource BoolToVisibilityConverter}, Mode=OneWay}" />
	</Grid>
</local:VideosViewBase>
